import { supabase } from '@/integrations/supabase/client';

// Тестовые данные для каждой категории
const testRequests = {
  "Электроника": [
    {
      title: "Нужен iPhone 15 Pro Max 256GB",
      description: "Ищу новый iPhone 15 Pro Max в отличном состоянии. Цвет не важен, главное чтобы был без царапин и работал корректно. Готов рассмотреть варианты с гарантией.",
      budget: "120000",
      city: "Москва",
      deadline: "2024-02-15"
    },
    {
      title: "Требуется MacBook Air M2 13 дюймов",
      description: "Нужен MacBook Air с чипом M2 для работы. Желательно 16GB RAM, 512GB SSD. Цвет Space Gray или Silver. Без повреждений, с оригинальной зарядкой.",
      budget: "150000",
      city: "Россия, все города",
      deadline: "2024-02-20"
    },
    {
      title: "Ищу игровой ноутбук ASUS ROG",
      description: "Нужен мощный игровой ноутбук ASUS ROG для современных игр. Минимум RTX 4060, 16GB RAM, SSD 1TB. В хорошем состоянии, без перегрева.",
      budget: "180000",
      city: "Россия, все города",
      deadline: "2024-02-25"
    },
    {
      title: "Покупаю беспроводные наушники AirPods Pro",
      description: "Ищу AirPods Pro 2-го поколения в отличном состоянии. Должны быть оригинальные, с зарядным кейсом. Без царапин и повреждений.",
      budget: "25000",
      city: "Россия, все города",
      deadline: "2024-02-18"
    },
    {
      title: "Нужен планшет iPad Pro 12.9 дюймов",
      description: "Ищу iPad Pro 12.9 с чипом M2 для дизайна и работы. Желательно с Apple Pencil. В отличном состоянии, без царапин на экране.",
      budget: "100000",
      city: "Россия, все города",
      deadline: "2024-02-22"
    }
  ],
  "Услуги": [
    {
      title: "Нужна уборка квартиры 3 комнаты",
      description: "Требуется генеральная уборка трехкомнатной квартиры. Включая мытье окон, полов, сантехники. Нужно качественно и быстро.",
      budget: "8000",
      city: "Москва",
      deadline: "2024-02-16"
    },
    {
      title: "Ищу репетитора по математике для 9 класса",
      description: "Нужен опытный репетитор по математике для подготовки к ОГЭ. Занятия 2 раза в неделю по 1.5 часа. Опыт работы с подростками обязателен.",
      budget: "15000",
      city: "Россия, все города",
      deadline: "2024-02-28"
    },
    {
      title: "Требуется доставка мебели",
      description: "Нужна доставка дивана и шкафа из магазина до квартиры. Расстояние 15 км. Требуется аккуратная транспортировка и подъем на 3 этаж.",
      budget: "5000",
      city: "Россия, все города",
      deadline: "2024-02-19"
    },
    {
      title: "Ищу мастера по ремонту стиральной машины",
      description: "Стиральная машина Samsung не отжимает белье. Нужен опытный мастер для диагностики и ремонта. Гарантия на работу обязательна.",
      budget: "3000",
      city: "Россия, все города",
      deadline: "2024-02-17"
    },
    {
      title: "Нужна помощь в переезде",
      description: "Требуется помощь в переезде из однокомнатной квартиры. Упаковка вещей, погрузка, разгрузка. Нужны ответственные грузчики.",
      budget: "12000",
      city: "Россия, все города",
      deadline: "2024-02-21"
    }
  ],
  "Дизайн": [
    {
      title: "Нужен логотип для IT-компании",
      description: "Требуется разработка современного логотипа для IT-стартапа. Стиль минималистичный, цвета синий и белый. Нужны варианты в разных форматах.",
      budget: "25000",
      city: "Москва",
      deadline: "2024-02-20"
    },
    {
      title: "Ищу дизайнера для создания сайта",
      description: "Нужен UI/UX дизайнер для создания дизайна интернет-магазина. 15 страниц, адаптивный дизайн. Опыт работы с e-commerce обязателен.",
      budget: "80000",
      city: "Россия, все города",
      deadline: "2024-03-01"
    },
    {
      title: "Требуется дизайн визиток",
      description: "Нужен дизайн визиток для юридической фирмы. Классический стиль, корпоративные цвета. Тираж 1000 штук, готовые файлы для печати.",
      budget: "5000",
      city: "Россия, все города",
      deadline: "2024-02-18"
    },
    {
      title: "Ищу иллюстратора для детской книги",
      description: "Нужны иллюстрации для детской книги (32 страницы). Стиль мультяшный, яркие цвета. Опыт работы с детской литературой приветствуется.",
      budget: "60000",
      city: "Россия, все города",
      deadline: "2024-03-05"
    },
    {
      title: "Нужен дизайн упаковки для косметики",
      description: "Требуется дизайн упаковки для линейки натуральной косметики. Эко-стиль, пастельные тона. Нужны макеты для разных форматов.",
      budget: "35000",
      city: "Россия, все города",
      deadline: "2024-02-25"
    }
  ],
  "Мебель": [
    {
      title: "Ищу диван-кровать для гостиной",
      description: "Нужен качественный диван-кровать для гостиной 20 кв.м. Цвет серый или бежевый, механизм раскладывания. В хорошем состоянии.",
      budget: "45000",
      city: "Москва",
      deadline: "2024-02-22"
    },
    {
      title: "Покупаю письменный стол с ящиками",
      description: "Требуется письменный стол из дерева с тремя ящиками. Размер 120x60 см. В отличном состоянии, без царапин и повреждений.",
      budget: "15000",
      city: "Россия, все города",
      deadline: "2024-02-19"
    },
    {
      title: "Нужен шкаф-купе 3 двери",
      description: "Ищу шкаф-купе белого цвета с зеркальными дверями. Ширина 180 см, высота 240 см. Встроенный, с полками и штангой.",
      budget: "35000",
      city: "Россия, все города",
      deadline: "2024-02-26"
    },
    {
      title: "Требуется кровать двуспальная с матрасом",
      description: "Нужна кровать 160x200 см с ортопедическим матрасом. Стиль минимализм, цвет белый или серый. В отличном состоянии.",
      budget: "25000",
      city: "Россия, все города",
      deadline: "2024-02-23"
    },
    {
      title: "Ищу обеденный стол на 6 человек",
      description: "Покупаю обеденный стол из массива дерева. Размер 140x80 см. В хорошем состоянии, без сколов и глубоких царапин.",
      budget: "20000",
      city: "Россия, все города",
      deadline: "2024-02-20"
    }
  ],
  "Образование": [
    {
      title: "Нужны курсы английского языка",
      description: "Ищу курсы английского языка для уровня Intermediate. Групповые занятия 2 раза в неделю. Опытные преподаватели, современные методики.",
      budget: "20000",
      city: "Москва",
      deadline: "2024-02-28"
    },
    {
      title: "Требуется репетитор по физике",
      description: "Нужен репетитор по физике для подготовки к ЕГЭ. Индивидуальные занятия, опыт работы с выпускниками. Готовность к интенсивной подготовке.",
      budget: "18000",
      city: "Россия, все города",
      deadline: "2024-03-01"
    },
    {
      title: "Ищу курсы программирования Python",
      description: "Нужны курсы программирования на Python для начинающих. Онлайн или офлайн, с практическими заданиями. Сертификат по окончании.",
      budget: "30000",
      city: "Россия, все города",
      deadline: "2024-02-25"
    },
    {
      title: "Покупаю учебники по математике",
      description: "Требуются учебники по математике для 10-11 класса. Алгебра и геометрия, в хорошем состоянии. Полный комплект для подготовки к ЕГЭ.",
      budget: "5000",
      city: "Россия, все города",
      deadline: "2024-02-18"
    },
    {
      title: "Нужны курсы вождения категории B",
      description: "Ищу автошколу для получения прав категории B. Удобное расписание, опытные инструкторы. Теория и практика, сдача экзаменов.",
      budget: "35000",
      city: "Россия, все города",
      deadline: "2024-03-10"
    }
  ],
  "Авто": [
    {
      title: "Покупаю Toyota Camry 2018-2020",
      description: "Ищу Toyota Camry в отличном состоянии. Пробег до 100000 км, один владелец, полная комплектация. Цвет белый или серебристый.",
      budget: "2500000",
      city: "Москва",
      deadline: "2024-03-01"
    },
    {
      title: "Нужен Volkswagen Golf 7",
      description: "Требуется Volkswagen Golf 7-го поколения. Дизель или бензин, механическая коробка. В хорошем техническом состоянии, без ДТП.",
      budget: "1200000",
      city: "Россия, все города",
      deadline: "2024-02-25"
    },
    {
      title: "Ищу Hyundai Solaris 2019-2021",
      description: "Покупаю Hyundai Solaris в отличном состоянии. Автоматическая коробка, кондиционер, подушки безопасности. Один владелец, сервисная книжка.",
      budget: "900000",
      city: "Россия, все города",
      deadline: "2024-02-28"
    },
    {
      title: "Требуется KIA Rio 2020-2022",
      description: "Нужен KIA Rio в хорошем состоянии. Комплектация Comfort или Premium. Пробег до 50000 км, без серьезных повреждений.",
      budget: "1100000",
      city: "Россия, все города",
      deadline: "2024-02-22"
    },
    {
      title: "Покупаю Nissan Qashqai 2018-2020",
      description: "Ищу Nissan Qashqai в отличном состоянии. Полный привод, автоматическая коробка. Цвет черный или белый, один владелец.",
      budget: "1800000",
      city: "Россия, все города",
      deadline: "2024-03-05"
    }
  ],
  "Одежда и аксессуары": [
    {
      title: "Ищу зимнюю куртку мужскую 52 размер",
      description: "Нужна качественная зимняя куртка для мужчины. Размер 52, цвет черный или темно-синий. Утеплитель пух или синтетика, водонепроницаемая.",
      budget: "15000",
      city: "Москва",
      deadline: "2024-02-20"
    },
    {
      title: "Покупаю кроссовки Nike размер 42",
      description: "Требуются кроссовки Nike для бега. Размер 42, цвет не важен. В хорошем состоянии, без сильных потертостей. Оригинальные.",
      budget: "8000",
      city: "Россия, все города",
      deadline: "2024-02-18"
    },
    {
      title: "Нужно платье для выпускного 44 размер",
      description: "Ищу красивое платье для выпускного вечера. Размер 44, длина до колена или длинное. Цвет темно-синий или черный, элегантный фасон.",
      budget: "12000",
      city: "Россия, все города",
      deadline: "2024-02-25"
    },
    {
      title: "Требуется деловой костюм мужской 50 размер",
      description: "Нужен качественный деловой костюм. Размер 50, цвет темно-синий или серый. В отличном состоянии, без потертостей и пятен.",
      budget: "20000",
      city: "Россия, все города",
      deadline: "2024-02-22"
    },
    {
      title: "Ищу сумку женскую кожаную",
      description: "Покупаю качественную кожаную сумку для женщины. Размер средний, цвет коричневый или черный. Бренд не важен, главное качество.",
      budget: "10000",
      city: "Россия, все города",
      deadline: "2024-02-19"
    }
  ],
  "Хобби и отдых": [
    {
      title: "Нужен велосипед горный 26 дюймов",
      description: "Ищу горный велосипед в хорошем состоянии. Размер рамы L, 26 дюймов. Тормоза дисковые, переключатели Shimano. Без серьезных повреждений.",
      budget: "25000",
      city: "Москва",
      deadline: "2024-02-26"
    },
    {
      title: "Покупаю гитару акустическую",
      description: "Требуется акустическая гитара для начинающих. Размер 4/4, в хорошем состоянии. С чехлом и медиаторами. Бренд Yamaha или аналогичный.",
      budget: "15000",
      city: "Россия, все города",
      deadline: "2024-02-23"
    },
    {
      title: "Ищу настольные игры для семьи",
      description: "Нужны настольные игры для семейного досуга. Монополия, Уно, Скрэббл и другие популярные игры. В хорошем состоянии, полные комплекты.",
      budget: "5000",
      city: "Россия, все города",
      deadline: "2024-02-20"
    },
    {
      title: "Требуется палатка для кемпинга",
      description: "Покупаю палатку для 4 человек. Водонепроницаемая, с тентом. В хорошем состоянии, без дыр и повреждений. С колышками и растяжками.",
      budget: "8000",
      city: "Россия, все города",
      deadline: "2024-02-24"
    },
    {
      title: "Нужны коньки фигурные 38 размер",
      description: "Ищу фигурные коньки для взрослого. Размер 38, в хорошем состоянии. Лезвия острые, ботинки без повреждений. С чехлами.",
      budget: "6000",
      city: "Россия, все города",
      deadline: "2024-02-21"
    }
  ],
  "Животные": [
    {
      title: "Ищу щенка лабрадора",
      description: "Хочу купить щенка лабрадора. Возраст 2-3 месяца, с документами и прививками. Родители с хорошей родословной, здоровые.",
      budget: "50000",
      city: "Москва",
      deadline: "2024-02-28"
    },
    {
      title: "Нужен корм для кошек премиум класса",
      description: "Требуется корм для кошек премиум класса. Сухой корм, 10-15 кг. Бренд Royal Canin, Hills или аналогичный. Срок годности не менее 6 месяцев.",
      budget: "3000",
      city: "Россия, все города",
      deadline: "2024-02-19"
    },
    {
      title: "Покупаю клетку для попугая",
      description: "Ищу просторную клетку для волнистого попугая. Размер минимум 50x30x40 см. С жердочками, поилкой и кормушкой. В хорошем состоянии.",
      budget: "4000",
      city: "Россия, все города",
      deadline: "2024-02-22"
    },
    {
      title: "Требуется переноска для кота",
      description: "Нужна качественная переноска для кота. Размер средний, пластиковая или тканевая. Вентиляция хорошая, надежные замки. Без повреждений.",
      budget: "2500",
      city: "Россия, все города",
      deadline: "2024-02-18"
    },
    {
      title: "Ищу аквариум 100 литров",
      description: "Покупаю аквариум объемом 100 литров. С крышкой, подсветкой и фильтром. В хорошем состоянии, без трещин. С грунтом и декором.",
      budget: "8000",
      city: "Россия, все города",
      deadline: "2024-02-25"
    }
  ],
  "Запчасти": [
    {
      title: "Нужны диски литые 17 дюймов",
      description: "Ищу литые диски для автомобиля. Размер 17 дюймов, вылет ET35-40. Состояние хорошее, без серьезных повреждений. Цвет серебристый или черный.",
      budget: "25000",
      city: "Москва",
      deadline: "2024-02-24"
    },
    {
      title: "Покупаю аккумулятор 60 Ач",
      description: "Требуется автомобильный аккумулятор 60 Ач. Ток холодной прокрутки не менее 540 А. Срок годности не менее 2 лет, в оригинальной упаковке.",
      budget: "6000",
      city: "Россия, все города",
      deadline: "2024-02-20"
    },
    {
      title: "Ищу шины зимние 205/55 R16",
      description: "Нужны зимние шины для автомобиля. Размер 205/55 R16, остаток протектора не менее 6 мм. Бренд Michelin, Bridgestone или аналогичный.",
      budget: "15000",
      city: "Россия, все города",
      deadline: "2024-02-26"
    },
    {
      title: "Требуется генератор для ВАЗ 2110",
      description: "Покупаю генератор для ВАЗ 2110. Мощность 80-90 А, в рабочем состоянии. Без шума и вибрации, с гарантией на работу.",
      budget: "8000",
      city: "Россия, все города",
      deadline: "2024-02-22"
    },
    {
      title: "Нужны тормозные колодки передние",
      description: "Ищу тормозные колодки для передних колес. Марка автомобиля Toyota Camry 2015-2020. Оригинальные или качественные аналоги.",
      budget: "4000",
      city: "Россия, все города",
      deadline: "2024-02-19"
    }
  ],
  "Детские товары": [
    {
      title: "Ищу коляску для новорожденного",
      description: "Нужна коляска-трансформер для новорожденного. 3 в 1: люлька, прогулочный блок, автокресло. Цвет нейтральный, в хорошем состоянии.",
      budget: "35000",
      city: "Москва",
      deadline: "2024-02-27"
    },
    {
      title: "Покупаю детский велосипед 16 дюймов",
      description: "Требуется детский велосипед для ребенка 4-6 лет. Размер колес 16 дюймов, с дополнительными колесиками. В хорошем состоянии, без повреждений.",
      budget: "12000",
      city: "Россия, все города",
      deadline: "2024-02-23"
    },
    {
      title: "Нужны игрушки LEGO",
      description: "Ищу наборы LEGO для детей 6-10 лет. Тематика не важна, главное чтобы были полные комплекты с инструкциями. В хорошем состоянии.",
      budget: "8000",
      city: "Россия, все города",
      deadline: "2024-02-21"
    },
    {
      title: "Требуется детская кровать 120x60",
      description: "Покупаю детскую кровать с бортиками. Размер 120x60 см, в хорошем состоянии. Цвет белый или натуральное дерево, без повреждений.",
      budget: "15000",
      city: "Россия, все города",
      deadline: "2024-02-25"
    },
    {
      title: "Ищу детский стульчик для кормления",
      description: "Нужен стульчик для кормления ребенка. С регулировкой высоты и наклона спинки. В хорошем состоянии, все крепления целые.",
      budget: "6000",
      city: "Россия, все города",
      deadline: "2024-02-20"
    }
  ],
  "Недвижимость": [
    {
      title: "Ищу однокомнатную квартиру в центре",
      description: "Покупаю однокомнатную квартиру в центре города. Площадь от 35 кв.м, хорошая планировка. Ремонт не важен, главное состояние.",
      budget: "8000000",
      city: "Москва",
      deadline: "2024-03-15"
    },
    {
      title: "Нужна двухкомнатная квартира в новостройке",
      description: "Требуется двухкомнатная квартира в новостройке. Площадь от 60 кв.м, с балконом. Готовность дома не менее 70%, с отделкой.",
      budget: "6000000",
      city: "Россия, все города",
      deadline: "2024-03-20"
    },
    {
      title: "Покупаю студию для инвестиций",
      description: "Ищу студию для сдачи в аренду. Площадь от 25 кв.м, хорошая транспортная доступность. Ремонт не важен, главное расположение.",
      budget: "3000000",
      city: "Россия, все города",
      deadline: "2024-03-10"
    },
    {
      title: "Требуется комната в коммунальной квартире",
      description: "Нужна комната в коммунальной квартире для временного проживания. Площадь от 12 кв.м, с мебелью. Соседи спокойные, тихие.",
      budget: "1500000",
      city: "Россия, все города",
      deadline: "2024-02-28"
    },
    {
      title: "Ищу дачу с участком 6 соток",
      description: "Покупаю дачу с участком 6 соток. Дом от 50 кв.м, в хорошем состоянии. Участок ровный, с плодовыми деревьями. До города не более 50 км.",
      budget: "2500000",
      city: "Россия, все города",
      deadline: "2024-03-05"
    }
  ],
  "Красота и здоровье": [
    {
      title: "Нужен массаж спины и шеи",
      description: "Требуется профессиональный массаж спины и шеи. Опытный массажист, медицинское образование. Курс 10 сеансов, в удобное время.",
      budget: "15000",
      city: "Москва",
      deadline: "2024-02-25"
    },
    {
      title: "Ищу косметолога для чистки лица",
      description: "Нужна профессиональная чистка лица у косметолога. Опыт работы с проблемной кожей, качественные препараты. Консультация включена.",
      budget: "5000",
      city: "Россия, все города",
      deadline: "2024-02-22"
    },
    {
      title: "Покупаю абонемент в фитнес-клуб",
      description: "Требуется абонемент в фитнес-клуб на 3 месяца. Тренажерный зал, групповые занятия, бассейн. Удобное расположение, хорошее оборудование.",
      budget: "12000",
      city: "Россия, все города",
      deadline: "2024-02-20"
    },
    {
      title: "Нужна стрижка и окрашивание волос",
      description: "Ищу опытного парикмахера для стрижки и окрашивания. Длинные волосы, сложное окрашивание. Качественные краски, современные техники.",
      budget: "8000",
      city: "Россия, все города",
      deadline: "2024-02-23"
    },
    {
      title: "Требуется маникюр и педикюр",
      description: "Покупаю услуги маникюра и педикюра. Классический маникюр, покрытие гель-лаком. Опытный мастер, стерильные инструменты.",
      budget: "4000",
      city: "Россия, все города",
      deadline: "2024-02-19"
    }
  ]
};

export const seedTestData = async () => {
  try {
    console.log('Начинаем заполнение каталога тестовыми данными...');
    
    // Проверяем авторизацию
    const { data: { session }, error: sessionError } = await supabase.auth.getSession();
    
    if (sessionError) {
      console.error('Ошибка получения сессии:', sessionError);
      alert('Ошибка авторизации. Войдите в систему.');
      return;
    }
    
    if (!session?.user) {
      console.error('Пользователь не авторизован');
      alert('Для создания запросов необходимо войти в систему.');
      return;
    }
    
    console.log('Пользователь авторизован:', session.user.id);
    
    let totalCreated = 0;
    let totalErrors = 0;
    
    // Создаем запросы для каждой категории
    for (const [category, requests] of Object.entries(testRequests)) {
      console.log(`Создаем запросы для категории: ${category}`);
      
      for (const requestData of requests) {
        try {
          const { data, error } = await supabase
            .from('requests')
            .insert({
              user_id: session.user.id,
              title: requestData.title,
              description: requestData.description,
              category: category,
              budget: requestData.budget,
              city: requestData.city,
              deadline: requestData.deadline
            })
            .select();
          
          if (error) {
            console.error(`Ошибка создания запроса "${requestData.title}":`, error);
            totalErrors++;
          } else {
            console.log(`Создан запрос: ${requestData.title}`);
            totalCreated++;
          }
        } catch (err) {
          console.error(`Ошибка при создании запроса "${requestData.title}":`, err);
          totalErrors++;
        }
      }
    }
    
    console.log(`Заполнение завершено! Создано: ${totalCreated}, Ошибок: ${totalErrors}`);
    alert(`Каталог заполнен тестовыми данными!\nСоздано запросов: ${totalCreated}\nОшибок: ${totalErrors}`);
    
  } catch (error) {
    console.error('Общая ошибка при заполнении данных:', error);
    alert('Произошла ошибка при заполнении каталога. Проверьте консоль для деталей.');
  }
};
